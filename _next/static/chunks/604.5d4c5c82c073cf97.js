"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[604],{4604:function(e,n,r){r.r(n);var t=r(5230),a=r.n(t),o=r(4246),i=r(9155),c=r.n(i),s=r(7378),u=r(7118),l=r.n(u),d=r(2482),f=r(3856);function m(e,n){(null==n||n>e.length)&&(n=e.length);for(var r=0,t=new Array(n);r<n;r++)t[r]=e[r];return t}function h(e,n,r,t,a,o,i){try{var c=e[o](i),s=c.value}catch(u){return void r(u)}c.done?n(s):Promise.resolve(s).then(t,a)}function v(e){return function(e){if(Array.isArray(e))return m(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"===typeof e)return m(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return m(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var p=[{name:"Hello, world!",stem:"helloworld",audio:["webm","mp4"]},{name:"Multiple Editors",stem:"multieditor",audio:["webm","mp4"]},{name:"Scrolling Demo",stem:"scrolldemo",audio:["webm","mp4"]}];n.default=function(){var e=(0,s.useState)(),n=e[0],r=e[1],t=(0,s.useState)([]),u=t[0],m=t[1],j=(0,s.useRef)(),y=(0,s.useRef)(),x=(0,s.useState)(void 0),b=x[0],g=x[1],S=(0,s.useState)("paused"),w=S[0],k=S[1],C=(0,s.useState)("Main.java"),A=C[0],E=C[1],M=(0,s.useState)(),L=M[0],T=M[1];(0,s.useEffect)((function(){null===b||void 0===b||b.addStateListener((function(e){return k(e)}))}),[b]),(0,s.useEffect)((function(){"recording"===w&&r(void 0)}),[w,b]);var O,N,F=(0,s.useState)(!1),P=(F[0],F[1]),R=((0,s.useCallback)((O=a().mark((function e(){var n,r,t,o;return a().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(b&&b.src){e.next=2;break}return e.abrupt("return");case 2:return P(!0),n=b.src,r=n.ace,t=n.audio,e.next=6,(0,i.urlToBase64)(t);case 6:o=e.sent,fetch("/api/",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({ace:r,audio:o})}).finally((function(){P(!1)}));case 8:case"end":return e.stop()}}),e)})),function(){var e=this,n=arguments;return new Promise((function(r,t){var a=O.apply(e,n);function o(e){h(a,r,t,o,i,"next",e)}function i(e){h(a,r,t,o,i,"throw",e)}o(void 0)}))}),[b]),(0,s.useCallback)((function(){if(j.current&&y.current){var e=new(c())(j.current,{replayEditor:y.current});e.ace.scrollToCursor=!0,e.ace.recorder.addListener("record",(function(e){m((function(n){return[e].concat(v(n))}))})),e.ace.addListener("record",(function(e){i.Complete.guard(e)&&T(e.sessionName)})),e.ace.recorder.addSessions([{name:"Main.java",contents:"",mode:"ace/mode/java"},{name:"Another.java",contents:"",mode:"ace/mode/java"}]),e.ace.recorder.setSession("Main.java"),g(e)}}),[]));return(0,s.useEffect)((function(){null===b||void 0===b||b.ace.recorder.setSession(A)}),[A,b]),(0,s.useEffect)((function(){var e;n&&b&&fetch("".concat(null!==(e="/ace-tracer")?e:"","/").concat(n.stem,".json")).then((function(e){return e.json()})).then((function(e){var r,t=i.AceTraceContent.check(e);b.src={ace:t,audio:"".concat(null!==(r="/ace-tracer")?r:"","/").concat(n.stem,".mp4")}}))}),[n,b]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)("p",{children:"Use the record button to start recording, and play to replay when you are finished."}),(0,o.jsxs)("select",{id:"language",onChange:function(e){return r(p.find((function(n){return n.stem===e.target.value})))},value:null!==(N=null===n||void 0===n?void 0:n.stem)&&void 0!==N?N:"",children:[(0,o.jsx)("option",{value:""},""),p.map((function(e){var n=e.name,r=e.stem;return(0,o.jsx)("option",{value:r,children:n},r)}))]}),b&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(f.Z,{recordReplayer:b}),!1]}),(0,o.jsx)("div",{style:{display:"flex"},children:"recording"===w&&(0,o.jsx)(l(),{children:function(){return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(l().Minutes,{}),":",(0,o.jsx)(l().Seconds,{})]})}})}),(0,o.jsx)("span",{children:"Record"}),(0,o.jsx)(d.Z,{onLoad:function(e){j.current=e,R()}}),(0,o.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginBottom:8},children:[(0,o.jsx)("button",{onClick:function(){return E("Main.java")},children:(0,o.jsx)("kbd",{style:{fontWeight:"Main.java"===A?"bold":"inherit"},children:"Main.java"})}),(0,o.jsx)("button",{onClick:function(){return E("Another.java")},children:(0,o.jsx)("kbd",{style:{fontWeight:"Another.java"===A?"bold":"inherit"},children:"Another.java"})})]}),(0,o.jsx)("span",{children:"Play"}),(0,o.jsx)(d.Z,{readOnly:!0,minLines:2,maxLines:2,onLoad:function(e){y.current=e,R()}}),(0,o.jsx)("div",{children:(0,o.jsx)("span",{children:null!==L&&void 0!==L?L:(0,o.jsx)(o.Fragment,{children:"\xa0"})})}),(0,o.jsx)("div",{style:{height:"16rem",overflow:"scroll",marginTop:8},children:u.filter((function(e){return!i.Complete.guard(e)||"timer"!==e.reason})).map((function(e,n){return(0,o.jsx)("pre",{children:JSON.stringify(e,null,2)},n)}))})]})}}}]);