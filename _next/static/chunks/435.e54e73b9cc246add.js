"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[435],{1435:function(e,n,r){r.r(n);var t=r(4246),a=r(9155),s=r.n(a),l=r(7378),o=r(7118),i=r.n(o),c=r(4281),d=r(7529);let u=[{name:"Hello, world!",stem:"helloworld",audio:["webm","mp4"]},{name:"Multiple Editors",stem:"multieditor",audio:["webm","mp4"]},{name:"Scrolling Demo",stem:"scrolldemo",audio:["webm","mp4"]}];n.default=()=>{var e;let[n,r]=(0,l.useState)(),[o,h]=(0,l.useState)([]),m=(0,l.useRef)(),j=(0,l.useRef)(),[f,p]=(0,l.useState)(void 0),[x,v]=(0,l.useState)("paused"),[g,y]=(0,l.useState)("Main.java"),[S,b]=(0,l.useState)();(0,l.useEffect)(()=>{null==f||f.addStateListener(e=>v(e))},[f]),(0,l.useEffect)(()=>{"recording"===x&&r(void 0)},[x,f]);let[w,C]=(0,l.useState)(!1);(0,l.useCallback)(async()=>{if(!f||!f.src)return;C(!0);let{ace:e,audio:n}=f.src,r=await (0,a.urlToBase64)(n);fetch("/api/",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({ace:e,audio:r})}).finally(()=>{C(!1)})},[f]);let k=(0,l.useCallback)(()=>{if(!m.current||!j.current)return;let e=new(s())(m.current,{replayEditor:j.current});e.ace.scrollToCursor=!0,e.ace.recorder.addListener("record",e=>{h(n=>[e,...n])}),e.ace.addListener("record",e=>{a.Complete.guard(e)&&b(e.sessionName)}),e.ace.recorder.addSessions([{name:"Main.java",contents:"",mode:"ace/mode/java"},{name:"Another.java",contents:"",mode:"ace/mode/java"}]),e.ace.recorder.setSession("Main.java"),p(e)},[]);return(0,l.useEffect)(()=>{null==f||f.ace.recorder.setSession(g)},[g,f]),(0,l.useEffect)(()=>{n&&f&&fetch("".concat("/ace-tracer","/").concat(n.stem,".json")).then(e=>e.json()).then(e=>{let r=a.AceTraceContent.check(e);f.src={ace:r,audio:"".concat("/ace-tracer","/").concat(n.stem,".mp4")}})},[n,f]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Use the record button to start recording, and play to replay when you are finished."}),(0,t.jsxs)("select",{id:"language",onChange:e=>r(u.find(n=>{let{stem:r}=n;return r===e.target.value})),value:null!==(e=null==n?void 0:n.stem)&&void 0!==e?e:"",children:[(0,t.jsx)("option",{value:""},""),u.map(e=>{let{name:n,stem:r}=e;return(0,t.jsx)("option",{value:r,children:n},r)})]}),f&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{recordReplayer:f}),!1]}),(0,t.jsx)("div",{style:{display:"flex"},children:"recording"===x&&(0,t.jsx)(i(),{children:()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(i().Minutes,{}),":",(0,t.jsx)(i().Seconds,{})]})})}),(0,t.jsx)("span",{children:"Record"}),(0,t.jsx)(c.Z,{onLoad:e=>{m.current=e,k()}}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginBottom:8},children:[(0,t.jsx)("button",{onClick:()=>y("Main.java"),children:(0,t.jsx)("kbd",{style:{fontWeight:"Main.java"===g?"bold":"inherit"},children:"Main.java"})}),(0,t.jsx)("button",{onClick:()=>y("Another.java"),children:(0,t.jsx)("kbd",{style:{fontWeight:"Another.java"===g?"bold":"inherit"},children:"Another.java"})})]}),(0,t.jsx)("span",{children:"Play"}),(0,t.jsx)(c.Z,{readOnly:!0,minLines:2,maxLines:2,onLoad:e=>{j.current=e,k()}}),(0,t.jsx)("div",{children:(0,t.jsx)("span",{children:null!=S?S:(0,t.jsx)(t.Fragment,{children:"\xa0"})})}),(0,t.jsx)("div",{style:{height:"16rem",overflow:"scroll",marginTop:8},children:o.filter(e=>!a.Complete.guard(e)||"timer"!==e.reason).map((e,n)=>(0,t.jsx)("pre",{children:JSON.stringify(e,null,2)},n))})]})}}}]);