"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[757],{2757:function(e,r,n){n.r(r);var t=n(4246),a=n(9155),s=n.n(a),o=n(7378),i=n(7118),l=n.n(i),c=n(6840),d=n(3722);let u=[{name:"Hello, world!",stem:"helloworld",audio:["webm","mp4"]},{name:"Multiple Editors",stem:"multieditor",audio:["webm","mp4"]},{name:"Scrolling Demo",stem:"scrolldemo",audio:["webm","mp4"]}];r.default=()=>{var e;let[r,n]=(0,o.useState)(),[i,h]=(0,o.useState)([]),m=(0,o.useRef)(),j=(0,o.useRef)(),[v,p]=(0,o.useState)(!1),f=(0,o.useRef)(void 0),[x,g]=(0,o.useState)("Main.java"),[y,S]=(0,o.useState)("paused"),[b,w]=(0,o.useState)(),[C,k]=(0,o.useState)(!1);(0,o.useCallback)(async()=>{var e;if(!(null===(e=f.current)||void 0===e?void 0:e.src))return;k(!0);let{ace:r,audio:n}=f.current.src,t=await (0,a.urlToBase64)(n);fetch("/api/",{method:"POST",headers:{"Content-Type":"application/json; charset=utf-8"},body:JSON.stringify({ace:r,audio:t})}).finally(()=>{k(!1)})},[f]);let M=(0,o.useCallback)(()=>{if(!m.current||!j.current)return;let e=new(s())(m.current,{replayEditor:j.current});e.ace.scrollToCursor=!0,e.ace.recorder.addListener("record",e=>{h(r=>[e,...r])}),e.ace.addListener("record",e=>{a.Complete.guard(e)&&w(e.sessionName)}),e.ace.recorder.addSessions([{name:"Main.java",contents:"",mode:"ace/mode/java"},{name:"Another.java",contents:"",mode:"ace/mode/java"}]),e.ace.recorder.setSession("Main.java"),e.addStateListener(e=>{"recording"===e&&n(void 0),S(e)}),f.current=e,p(!0)},[]);return(0,o.useEffect)(()=>{var e;null===(e=f.current)||void 0===e||e.ace.recorder.setSession(x)},[x]),(0,o.useEffect)(()=>{r&&f.current&&fetch("".concat("/ace-tracer","/").concat(r.stem,".json")).then(e=>e.json()).then(e=>{let n=a.AceTraceContent.check(e);f.current.src={ace:n,audio:"".concat("/ace-tracer","/").concat(r.stem,".mp4")}})},[r]),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("p",{children:"Use the record button to start recording, and play to replay when you are finished."}),(0,t.jsxs)("select",{id:"language",onChange:e=>n(u.find(r=>{let{stem:n}=r;return n===e.target.value})),value:null!==(e=null==r?void 0:r.stem)&&void 0!==e?e:"",children:[(0,t.jsx)("option",{value:""},""),u.map(e=>{let{name:r,stem:n}=e;return(0,t.jsx)("option",{value:n,children:r},n)})]}),v&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(d.Z,{recordReplayer:f.current}),!1]}),(0,t.jsx)("div",{style:{display:"flex"},children:"recording"===y&&(0,t.jsx)(l(),{children:()=>(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l().Minutes,{}),":",(0,t.jsx)(l().Seconds,{})]})})}),(0,t.jsx)("span",{children:"Record"}),(0,t.jsx)(c.Z,{onLoad:e=>{e.on("mousewheel",e=>{var r;if((null===(r=f.current)||void 0===r?void 0:r.state)==="recording")return e.defaultPrevented=!0,!1}),m.current=e,M()}}),(0,t.jsxs)("div",{style:{display:"flex",flexDirection:"row",marginBottom:8},children:[(0,t.jsx)("button",{onClick:()=>g("Main.java"),children:(0,t.jsx)("kbd",{style:{fontWeight:"Main.java"===x?"bold":"inherit"},children:"Main.java"})}),(0,t.jsx)("button",{onClick:()=>g("Another.java"),children:(0,t.jsx)("kbd",{style:{fontWeight:"Another.java"===x?"bold":"inherit"},children:"Another.java"})})]}),(0,t.jsx)("span",{children:"Play"}),(0,t.jsx)(c.Z,{readOnly:!0,minLines:2,maxLines:2,onLoad:e=>{j.current=e,M()}}),(0,t.jsx)("div",{children:(0,t.jsx)("span",{children:null!=b?b:(0,t.jsx)(t.Fragment,{children:"\xa0"})})}),(0,t.jsx)("div",{style:{height:"16rem",overflow:"scroll",marginTop:8},children:i.filter(e=>!a.Complete.guard(e)||"timer"!==e.reason).map((e,r)=>(0,t.jsx)("pre",{children:JSON.stringify(e,null,2)},r))})]})}}}]);